#pragma once

#include "Animation.h"
#include "../SGD Wrappers/CSGD_TextureManager.h"
#include <string>
using namespace std;

class CCellAnimation :
	public CAnimation
{
public:

	////////////////////////////////////////////////////////////
	//Purpose:
	//
	//In:
	//
	//Return:
	////////////////////////////////////////////////////////////
	void Init(int id, int width, int height, int maxFrames, int rows, int cols);

	////////////////////////////////////////////////////////////
	//Purpose:
	//
	//In:
	//
	//Return:
	////////////////////////////////////////////////////////////
	void Update(float fElapsed, CFrame& animInfo);

	////////////////////////////////////////////////////////////
	//Purpose:
	//
	//In:
	//
	//Return:
	////////////////////////////////////////////////////////////
	void Render(int frame, int x, int y, float scalex, float scaley, DWORD dwColor, bool flipped = false, bool playing = true, bool looping = true);
	
	////////////////////////////////////////////////////////////
	//Purpose:
	//
	//In:
	//
	//Return:
	////////////////////////////////////////////////////////////
	bool CheckCollision(CBaseObject* pBase, CFrame key);
	
	////////////////////////////////////////////////////////////
	//Purpose:
	//
	//In:
	//
	//Return:
	////////////////////////////////////////////////////////////
	bool CheckCollision(CFrame* pBase, CFrame key);
	

	////////////////////////////////////////////////////////////
	//Purpose:
	//
	//In:
	//
	//Return:
	////////////////////////////////////////////////////////////
	CCellAnimation(void);
	
	////////////////////////////////////////////////////////////
	//Purpose:
	//
	//In:
	//
	//Return:
	////////////////////////////////////////////////////////////
	~CCellAnimation(void);
private:

	////////////////////////////////////////////////////////////
	//Purpose:
	//
	//In:
	//
	//Return:
	////////////////////////////////////////////////////////////
	RECT CellAlgorithm(int id);
	//string m_szFileName;
	CSGD_TextureManager* m_pTM;
	//vector<AnimationEvent> Events;
	int m_nWidth;
	int m_nHeight;
	int m_nMaxFrames;
	int m_nRows;
	int m_nCols;
	int m_nImageID;
};

